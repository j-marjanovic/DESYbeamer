\ProvidesPackage{beamerinnerthemedesy}[2017/01/20]
\RequirePackage[absolute,overlay]{textpos}

\mode<presentation>

\defbeamertemplate{title page}{desy}{
    \begin{textblock*}{\paperwidth}(0cm,0cm)\begin{beamercolorbox}[wd=\paperwidth,ht=1.74cm,dp=0.36cm,leftskip=0.3cm,rightskip=0.3cm]{title}
        \usebeamerfont{title}\inserttitle\usebeamercolor[fg]{local structure}.\par%
    \end{beamercolorbox}\end{textblock*}
    \ifx\insertsubtitle\@empty
    \begin{textblock*}{\paperwidth}(0cm,2.1cm)
    \else
    \begin{textblock*}{\paperwidth}(0cm,2.1cm)\begin{beamercolorbox}[wd=\paperwidth,ht=0.5cm,dp=0.17cm,leftskip=0.3cm,rightskip=0.3cm]{subtitle}
        \usebeamerfont{subtitle}\insertsubtitle\par%
    \end{beamercolorbox}\end{textblock*}
    \begin{textblock*}{\paperwidth}(0cm,2.77cm)
    \fi
    \begin{beamercolorbox}[wd=\paperwidth,ht=3.2cm,sep=0cm]{titlegraphic}
        \usebeamertemplate{titlegraphic}
    \end{beamercolorbox}\end{textblock*}
    \ifx\insertsubtitle\@empty
    \begin{textblock*}{0.44\paperwidth}(0.51\paperwidth,5.47cm)
    \else
    \begin{textblock*}{0.44\paperwidth}(0.51\paperwidth,6.14cm)
    \fi
        \usebeamercolor[fg]{text in title}\usebeamerfont{text in title}%
        \usebeamerfont*{author}\usebeamercolor[fg]{author}\insertauthor\par
        \usebeamerfont*{institute}\usebeamercolor*[fg]{institute}\insertinstitute\par
        \usebeamerfont*{date}\usebeamercolor*[fg]{date}\insertdate
    \end{textblock*}
    \begin{textblock*}{0.9\paperwidth}(0.05\paperwidth,7.7cm)
        \usebeamertemplate{logo in title}
    \end{textblock*}
}

\defbeamertemplate{titlegraphic}{user}{
	\inserttitlegraphic
}

\defbeamertemplate{titlegraphic}{desy}{
	\includegraphics[width=\paperwidth]{titlegraphics/desy.jpg}
}

\defbeamertemplate{titlegraphic}{cms}{
	\includegraphics[width=\paperwidth]{titlegraphics/cms.jpg}
}

\defbeamertemplate{logo in title}{desy}{
	\usebeamertemplate{helmholtz logo in title}
	\hfill
	\usebeamertemplate{other logo in title}
}

\defbeamertemplate{helmholtz logo in title}{en}{
	\includegraphics[height=0.8cm]{logos/helmholtz_en}
}

\defbeamertemplate{helmholtz logo in title}{de}{
	\includegraphics[height=0.8cm]{logos/helmholtz_de}
}

\defbeamertemplateparent{helmholtz logo}{helmholtz logo in title}{}

\defbeamertemplate{other logo in title}{desy}{
	\includegraphics[height=1.4cm]{logos/desy}
}

\defbeamertemplate{other logo in title}{desycms}{
	\includegraphics[height=1.4cm]{logos/desy}
	\hspace{0.5cm}
	\includegraphics[height=1.4cm]{logos/cms}
}

\defbeamertemplate{other logo in title}{desycmsbril}{
	\includegraphics[height=1.4cm]{logos/desy}
	\hspace{0.5cm}
	\includegraphics[height=1.4cm]{logos/cms}
	\hspace{0.5cm}
	\includegraphics[height=1.4cm]{logos/bril}
}

\setbeamertemplate{itemize item}{\usebeamercolor[fg]{itemize items}\textgreater}
\setbeamertemplate{itemize subitem}{\usebeamercolor[fg]{itemize items}\raisebox{1pt}{$\blacktriangleright$}}
\setbeamertemplate{itemize subsubitem}{\usebeamercolor[fg]{itemize items}\raisebox{1pt}{$\blacktriangleright$}}
\settowidth\leftmargini{\usefont{OML}{cmm}{m}{it}\usebeamertemplate{itemize item}}
\addtolength\leftmargini{\labelsep}
\newcommand{\atem}{\setbeamercolor{itemize items}{parent=alerted text}\item\setbeamercolor{itemize items}{parent=local structure}}
\newcommand{\etem}{\setbeamercolor{itemize items}{parent=emphasized text}\item\setbeamercolor{itemize items}{parent=local structure}}

\defbeamertemplate{backup title}{desy}{Supplementary\\Material}
\defbeamertemplate{backup title}{thankyou}{Thanks for your attention}
\defbeamertemplate{backup title page}{desy}{%
    \usebeamerfont{title}
    \begin{beamercolorbox}[wd=\paperwidth,ht=1.74cm,dp=1ex,leftskip=0.3cm,rightskip=0.3cm]{title}
        \usebeamertemplate{backup title}\usebeamercolor[fg]{local structure}.\par%
    \end{beamercolorbox}%
}
\defbeamertemplateparent{backup}{backup title,backup title page}{}

\setbeamertemplate{title page}[desy]
\setbeamertemplate{titlegraphic}[desy]
\setbeamertemplate{logo in title}[desy]
\setbeamertemplate{helmholtz logo}[en]
\setbeamertemplate{backup}[desy]

\mode<all>