\ProvidesPackage{beamerouterthemedesy}[2017/01/20]
\RequirePackage{etoolbox}
\newcommand{\ifhastext}[3]{\sbox0{#1}\ifdim\wd0=0pt{#3}\else{#2}\fi}

\mode<presentation>

\defbeamertemplate{frametitle}{desy}{
	\vspace{-0.1cm}
	\usebeamerfont{frametitle}
	\begin{beamercolorbox}[wd=\paperwidth,ht=2.8ex,dp=1ex,leftskip=0.3cm,rightskip=0.3cm]{frametitle}
		\insertframetitle
	\end{beamercolorbox}
	\ifx\insertframesubtitle\@empty%
	\else{
		\usebeamerfont{framesubtitle}
		\begin{beamercolorbox}[wd=\paperwidth,ht=2.8ex,dp=0.5ex,leftskip=0.3cm,rightskip=0.3cm]{framesubtitle}
			\insertframesubtitle
			\vspace{0.3ex}
		\end{beamercolorbox}
	}\fi
}

\defbeamertemplate{footline}{desy}{
    \usebeamerfont{text in head/foot}
    \begin{beamercolorbox}[wd=\paperwidth,ht=0.5cm,dp=0.2cm,leftskip=0.3cm,rightskip=0.3cm]{text in head/foot}
        \hfill\raisebox{0.34cm}{\usebeamertemplate{text in foot}}
        \hspace{0.1cm}\usebeamertemplate{logos in foot}
    \end{beamercolorbox}
}

\defbeamertemplate{text in foot}{desy}{%
    \ifhastext{\insertshortauthor}{{\usebeamercolor[fg]{author in head/foot}\usebeamerfont{author in head/foot}\insertshortauthor}%
    \usebeamertemplate{separator in foot}}{}%
    \ifhastext{\insertshortinstitute}{{\usebeamercolor[fg]{institute in head/foot}\usebeamerfont{institute in head/foot}\insertshortinstitute}%
    \usebeamertemplate{separator in foot}}{}%
    \ifhastext{\insertshortdate}{{\usebeamercolor[fg]{date in head/foot}\usebeamerfont{date in head/foot}\insertshortdate}%
    \usebeamertemplate{separator in foot}}{}%
    {\usebeamercolor[fg]{pagenumber in head/foot}\usebeamerfont{pagenumber in head/foot}\usebeamertemplate{page number in foot}}%
}
\defbeamertemplate{page number in foot}{page}{Page~\insertframenumber}
\defbeamertemplate{page number in foot}{page/total}{Page~\insertframenumber/\inserttotalframenumber}
\defbeamertemplate{page number in foot}{slide}{Slide~\insertframenumber}
\defbeamertemplate{page number in foot}{slide/total}{Slide~\insertframenumber/\inserttotalframenumber}
\defbeamertemplate{page number in foot}{number}{\insertframenumber}
\defbeamertemplate{page number in foot}{number/total}{\insertframenumber/\inserttotalframenumber}
\defbeamertemplate{separator in foot}{desy}{~~|~~}

\defbeamertemplate{logos in foot}{horizontal}{
    \usebeamertemplate{first logo in foot}
    \ifhastext{\usebeamertemplate{second logo in foot}}{
        \hspace{0.2cm}\usebeamertemplate{second logo in foot}
    }{}
    \ifhastext{\usebeamertemplate{third logo in foot}}{
        \hspace{0.2cm}\usebeamertemplate{third logo in foot}
    }{}
}
\defbeamertemplate{logos in foot}{vertical}{
    \ifhastext{\usebeamertemplate{third logo in foot}}{
        \hspace{0.425cm}
        \makebox[0pt]{\raisebox{2.1cm}{\usebeamertemplate{first logo in foot}}}%
        \makebox[0pt]{\raisebox{1.05cm}{\usebeamertemplate{second logo in foot}}}%
        \makebox[0pt]{\usebeamertemplate{third logo in foot}}
        \hspace{0.425cm}
    }{\ifhastext{\usebeamertemplate{second logo in foot}}{
        \hspace{0.425cm}
        \makebox[0pt]{\raisebox{1.05cm}{\usebeamertemplate{first logo in foot}}}%
        \makebox[0pt]{\usebeamertemplate{second logo in foot}}
        \hspace{0.425cm}
    }{\usebeamertemplate{first logo in foot}}}
}

\defbeamertemplate{first logo in foot}{none}{}
\defbeamertemplate{first logo in foot}{desy}{
    \includegraphics[height=0.85cm]{logos/desy}
}
\defbeamertemplate{second logo in foot}{none}{}
\defbeamertemplate{second logo in foot}{cms}{
    \includegraphics[height=0.85cm]{logos/cms}
}
\defbeamertemplate{third logo in foot}{none}{}
\defbeamertemplate{third logo in foot}{bril}{
    \includegraphics[height=0.85cm]{logos/bril}
}
\defbeamertemplatealias{second logo in foot}{desy}{none}
\defbeamertemplatealias{third logo in foot}{desy}{none}
\defbeamertemplatealias{first logo in foot}{desycms}{desy}
\defbeamertemplatealias{second logo in foot}{desycms}{cms}
\defbeamertemplatealias{third logo in foot}{desycms}{none}
\defbeamertemplatealias{first logo in foot}{desycmsbril}{desy}
\defbeamertemplatealias{second logo in foot}{desycmsbril}{cms}
\defbeamertemplatealias{third logo in foot}{desycmsbril}{bril}

\defbeamertemplateparent{logo in foot}{first logo in foot,second logo in foot,third logo in foot}{}

\BeforeBeginEnvironment{frame}{\setbeamertemplate{logos in foot}[horizontal]}
\define@key{beamerframe}{vertical}[true]{\setbeamertemplate{logos in foot}[vertical]}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{frametitle}[desy]
\setbeamertemplate{footline}[desy]
\setbeamertemplate{text in foot}[desy]
\setbeamertemplate{logos in foot}[horizontal]
\setbeamertemplate{logo in foot}[desy]
\setbeamertemplate{separator in foot}[desy]
\setbeamertemplate{page number in foot}[page]

\mode<all>